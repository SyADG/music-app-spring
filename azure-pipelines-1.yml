# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- uses: actions/checkout@master

- name: Set up Java version
  uses: actions/setup-java@v1
  with:
    java-version: '11'

- name: Build with Maven
  run: mvn clean install

- name: Deploy to Azure Web App
  uses: azure/webapps-deploy@v1
  with:
    app-name: 'music-app-back'
    slot-name: 'production'
    publish-profile: ${{ secrets.AzureAppService_PublishProfile_9234062b45be46b9b063c180a1aa0764 }}
    package: '${{ github.workspace }}/target/*.jar'
